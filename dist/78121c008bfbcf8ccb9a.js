(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{100:function(e,t,i){"use strict";i.d(t,"b",function(){return r}),i.d(t,"a",function(){return a});var s=i(7),r=function(e){var t=new FileReader;return new Promise(function(i,s){try{t.readAsDataURL(e),t.onloadend=function(){i(t.result)}}catch(e){throw new Error("Ошибка при чтении файла")}})},a=function(e){var t=s.a.defaults.baseURL;return"".concat(t,"/").concat(e)}},106:function(e,t,i){},107:function(e,t,i){},108:function(e,t,i){},109:function(e,t,i){},115:function(e,t,i){"use strict";var s=i(106);i.n(s).a},116:function(e,t,i){"use strict";var s=i(107);i.n(s).a},117:function(e,t,i){"use strict";var s=i(108);i.n(s).a},118:function(e,t,i){"use strict";var s=i(109);i.n(s).a},120:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"reviews"},[i("div",{staticClass:"reviews__container container"},[e._m(0),e.addMode?i("div",{staticClass:"reviews__edit-block"},[i("newComponent",{attrs:{review:e.review},on:{addNewReview:e.closeNewWindow,closeCurrentWindow:e.closeNewWindow}})],1):e._e(),e.editMode?i("div",{staticClass:"reviews__edit-block"},[i("editComponent",{attrs:{editedReview:e.editedReview},on:{closeEditWindow:e.closeEditWindow,addNewReview:e.closeEditWindow}})],1):e._e(),i("div",{staticClass:"reviews__admin-block"},[i("div",{staticClass:"reviews__container"},[e.addMode?i("ul",{staticClass:"reviews__list"},e._l(e.reviews,function(t){return i("li",{key:t.id,staticClass:"reviews__item"},[i("reviewComponent",{attrs:{review:t},on:{editWindow:e.openEditWindow}})],1)}),0):i("ul",{staticClass:"reviews__list"},[i("li",{staticClass:"reviews__item"},[i("div",{staticClass:"reviews__new-item",on:{click:function(t){return t.preventDefault(),e.openWindow(t)}}},[i("div",{staticClass:"reviews__new-item-title"},[e._v("Add New Review")]),i("button",{staticClass:"btn-add-new-review",attrs:{type:"button"}},[e._v("+")])])]),e._l(e.reviews,function(t){return i("li",{key:t.id,staticClass:"reviews__item"},[i("reviewComponent",{attrs:{review:t},on:{editWindow:e.openEditWindow}})],1)})],2)])])])])};s._withStripped=!0;var r=i(5),a=i.n(r),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"review__box"},[i("div",{staticClass:"review__image"},[i("div",{staticClass:"review__avatar"},[i("img",{staticClass:"review__image-pic",attrs:{src:e.absolutePath}})]),i("div",{staticClass:"review__title"},[i("h3",{staticClass:"review__fullname"},[e._v(e._s(e.review.author))]),i("h4",{staticClass:"review__occupation"},[e._v(e._s(e.review.occ))])])]),i("div",{staticClass:"review__info"},[i("div",{staticClass:"review__desc"},[i("p",[e._v(e._s(e.review.text))])]),i("div",{staticClass:"review__btns"},[i("button",{staticClass:"btn__edit-review",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.editCurrentReview(t)}}},[e._v("Edit")]),i("button",{staticClass:"btn__delete-review",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.removeCurrentReview(t)}}},[e._v("Delete")])])])])};n._withStripped=!0;var o=i(0),c=i.n(o),v=i(1),w=i.n(v),l=i(100),d=i(4),u={props:{review:Object},data:function(){return{absolutePath:Object(l.a)(this.review.photo)}},methods:a()({},Object(d.b)("reviews",["removeReview"]),{removeCurrentReview:function(){var e=w()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.removeReview(this.review.id);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}(),editCurrentReview:function(){this.$emit("editWindow",this.review)}})},f=(i(115),i(3)),_=Object(f.a)(u,n,[],!1,null,"7128681a",null);_.options.__file="src/admin/components/reviewsReview.vue";var m=_.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"new-review"},[e.message?i("div",{staticClass:"message",on:{click:e.closeMessage}},[e._v("All fields are required")]):e._e(),i("h2",{staticClass:"new-review__title"},[e._v("New Review")]),i("div",{staticClass:"new-review__block"},[i("label",{staticClass:"new-review__preview"},[i("div",{staticClass:"new-review__image",style:{backgroundImage:"url("+e.review.renderedPhoto+")"}},[e.stubMode?i("div",{staticClass:"new-review__stub"}):e._e(),i("input",{ref:"file",staticClass:"new-review__photo",attrs:{type:"file",name:"photo",enctype:"multipart/form-data"},on:{change:e.upLoadImage}})]),i("span",{staticClass:"btn-upload-photo"},[e._v("Add photo")])]),i("form",{staticClass:"new-review__info"},[i("div",{staticClass:"form-row form-row__introduction"},[i("label",{staticClass:"form-column"},[i("div",{staticClass:"form-row__title"},[e._v("Name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.review.author,expression:"review.author"}],staticClass:"form-row__text form-row__name",attrs:{type:"text",name:"name",placeholder:"Write your name here",required:""},domProps:{value:e.review.author},on:{input:function(t){t.target.composing||e.$set(e.review,"author",t.target.value)}}})]),i("label",{staticClass:"form-column"},[i("div",{staticClass:"form-row__title"},[e._v("Occupation")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.review.occ,expression:"review.occ"}],staticClass:"form-row__text form-row__website",attrs:{type:"web",name:"occupation",placeholder:"Write your occupation, please",required:""},domProps:{value:e.review.occ},on:{input:function(t){t.target.composing||e.$set(e.review,"occ",t.target.value)}}})])]),i("div",{staticClass:"form-row"},[i("label",{staticClass:"form-column"},[i("div",{staticClass:"form-row__title"},[e._v("Review")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.review.text,expression:"review.text"}],staticClass:"form-row__text form-row__desc",attrs:{name:"review",placeholder:"Your comments should be here",required:""},domProps:{value:e.review.text},on:{input:function(t){t.target.composing||e.$set(e.review,"text",t.target.value)}}})])]),e.transferOff?i("div",{staticClass:"form-row form-row__btns"},[i("button",{staticClass:"btn-reset",attrs:{type:"Reset"},on:{click:function(t){return t.preventDefault(),e.closeWindow(t)}}},[e._v("Cancel")]),i("button",{staticClass:"btn-submit",attrs:{type:"Submit"},on:{click:function(t){return t.preventDefault(),e.addNewReview(t)}}},[e._v("Submit")])]):e._e()])])])};p._withStripped=!0;var h={data:function(){return{review:{photo:{},author:"",occ:"",text:"",renderedPhoto:""},transferOff:!0,stubMode:!0,message:!1}},methods:a()({},Object(d.b)("reviews",["addReview"]),{validationForm:function(){for(var e in this.review)if(!this.review[e])return!1;return!!this.review.photo.name},addNewReview:function(){var e=w()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validationForm()){e.next=25;break}return this.transferOff=!1,(t=new FormData).append("author",this.review.author),t.append("photo",this.review.photo),t.append("occ",this.review.occ),t.append("text",this.review.text),e.prev=7,e.next=10,this.addReview(t);case 10:this.review.author="",this.review.photo="",this.review.occ="",this.review.text="",this.$emit("addNewReview"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0);case 20:return e.prev=20,this.transferOff=!0,e.finish(20);case 23:e.next=26;break;case 25:this.message=!0;case 26:case"end":return e.stop()}},e,this,[[7,17,20,23]])}));return function(){return e.apply(this,arguments)}}(),upLoadImage:function(e){var t=this;this.review.photo=this.$refs.file.files[0];var i=this.$refs.file.files[0];Object(l.b)(i).then(function(e){t.review.renderedPhoto=e,t.stubMode=!1})},closeWindow:function(){this.$emit("closeCurrentWindow")},closeMessage:function(){this.message=!1,console.log(this.message)}})},b=(i(116),Object(f.a)(h,p,[],!1,null,"78a47515",null));b.options.__file="src/admin/components/reviewsNew.vue";var C=b.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"new-review"},[e.message?i("div",{staticClass:"message",on:{click:e.closeMessage}},[e._v("All fields are required")]):e._e(),i("h2",{staticClass:"new-review__title"},[e._v("Edit Review")]),i("div",{staticClass:"new-review__block"},[i("label",{staticClass:"new-review__preview"},[i("div",{staticClass:"new-review__image",style:{backgroundImage:"url("+e.newReview.renderedPhoto+")"}},[e.stubMode?i("div",{staticClass:"new-review__stub"}):e._e(),i("input",{ref:"file",staticClass:"new-review__photo",attrs:{type:"file",enctype:"multipart/form-data"},on:{change:e.upLoadImage}})]),i("span",{staticClass:"btn-upload-photo"},[e._v("Add photo")])]),i("form",{staticClass:"new-review__info"},[i("div",{staticClass:"form-row form-row__introduction"},[i("label",{staticClass:"form-column"},[i("div",{staticClass:"form-row__title"},[e._v("Name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newReview.author,expression:"newReview.author"}],staticClass:"form-row__text form-row__name",attrs:{type:"text",name:"name",placeholder:e.editedReview.author,required:""},domProps:{value:e.newReview.author},on:{input:function(t){t.target.composing||e.$set(e.newReview,"author",t.target.value)}}})]),i("label",{staticClass:"form-column"},[i("div",{staticClass:"form-row__title"},[e._v("Occupation")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newReview.occ,expression:"newReview.occ"}],staticClass:"form-row__text form-row__website",attrs:{type:"web",name:"occupation",placeholder:e.editedReview.occ,required:""},domProps:{value:e.newReview.occ},on:{input:function(t){t.target.composing||e.$set(e.newReview,"occ",t.target.value)}}})])]),i("div",{staticClass:"form-row"},[i("label",{staticClass:"form-column"},[i("div",{staticClass:"form-row__title"},[e._v("Review")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newReview.text,expression:"newReview.text"}],staticClass:"form-row__text form-row__desc",attrs:{name:"text",placeholder:e.editedReview.text,required:""},domProps:{value:e.newReview.text},on:{input:function(t){t.target.composing||e.$set(e.newReview,"text",t.target.value)}}})])]),e.transferOff?i("div",{staticClass:"form-row form-row__btns"},[i("button",{staticClass:"btn-reset",attrs:{type:"Reset"},on:{click:function(t){return t.preventDefault(),e.closeWindow(t)}}},[e._v("Cancel")]),i("button",{staticClass:"btn-submit",attrs:{type:"Submit"},on:{click:function(t){return t.preventDefault(),e.editCurrentReview(t)}}},[e._v("Submit")])]):e._e()])])])};R._withStripped=!0;var g={props:{editedReview:Object},data:function(){return{newReview:{author:"",occ:"",photo:{},text:"",renderedPhoto:""},transferOff:!0,dataPack:{data:{},id:""},stubMode:!0,message:!1}},methods:a()({},Object(d.b)("reviews",["addReview","editReview","removeReview"]),{validationForm:function(){for(var e in this.newReview)if(!this.newReview[e])return!1;return!0},editCurrentReview:function(){var e=w()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validationForm()){e.next=22;break}return this.transferOff=!1,(t=new FormData).append("author",this.newReview.author),t.append("occ",this.newReview.occ),t.append("photo",this.newReview.photo),t.append("text",this.newReview.text),this.dataPack={data:t,id:this.editedReview.id},e.prev=8,e.next=11,this.editReview(this.dataPack);case 11:this.$emit("addNewReview"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0);case 17:return e.prev=17,this.transferOff=!0,e.finish(17);case 20:e.next=23;break;case 22:this.message=!0;case 23:case"end":return e.stop()}},e,this,[[8,14,17,20]])}));return function(){return e.apply(this,arguments)}}(),upLoadImage:function(e){var t=this;this.newReview.photo=this.$refs.file.files[0];var i=this.$refs.file.files[0];Object(l.b)(i).then(function(e){t.newReview.renderedPhoto=e,t.stubMode=!1})},closeWindow:function(){this.$emit("closeEditWindow")},closeMessage:function(){this.message=!1,console.log(this.message)}})},x=(i(117),Object(f.a)(g,R,[],!1,null,"a8218336",null));x.options.__file="src/admin/components/reviewsEdit.vue";var k={components:{reviewComponent:m,newComponent:C,editComponent:x.exports},data:function(){return{addMode:!1,editMode:!1,review:Object,editedReview:Object}},computed:a()({},Object(d.c)("reviews",{reviews:function(e){return e.reviews}})),created:function(){this.fetchReviews()},methods:a()({},Object(d.b)("reviews",["fetchReviews"]),{closeNewWindow:function(){this.addMode=!1},openEditWindow:function(e){this.addMode=!1,this.editMode=!0,this.editedReview=e},closeEditWindow:function(){this.editMode=!1,this.fetchReviews()},openWindow:function(){this.editMode=!1,this.addMode=!0}})},O=(i(118),Object(f.a)(k,s,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"reviews__title-block"},[t("h1",{staticClass:"reviews__title"},[this._v('"Reviews" Section')])])}],!1,null,"645e4abb",null));O.options.__file="src/admin/components/reviews.vue";t.default=O.exports}}]);